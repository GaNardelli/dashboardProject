import{a as T,b as te,c as ne}from"./chunk-JXQE6NJP.js";import{a as D,b as I,c as N,n as k,o as P,p as W,q as O,r as L}from"./chunk-BPMEI7BH.js";import{a as Z,d as S,g as C,h as v,i as w,j as A,k as F,l as $,n as ee,o as V}from"./chunk-4CV6FTMH.js";import{Ab as o,Bb as G,Cb as H,Db as d,Ea as m,Eb as c,Fb as u,Hb as Y,Ja as M,Pa as b,U as J,Z as h,da as g,db as K,ea as x,eb as Q,gb as n,hb as i,ib as U,jb as B,lb as _,mb as q,wb as X,y as f}from"./chunk-7XGW3HGD.js";import{a as z}from"./chunk-4CLCTAJ7.js";var j=class p{http=h(Z);getExpenseFromApi(e){let a="https://sometesteapi.com/expense_list";return e&&e>0&&(a+="?expense_id="+e),this.http.get(a)}deleteExpenseFromApi(e){let a="https://sometesteapi.com/expense_ctr?func=deleleteExpense&expense_id="+e;return this.http.delete(a)}addNewExpense(e){return this.http.post("https://sometesteapi.com/expense_ctr?func=addNewExpense",e)}updateExpense(e){return this.http.post("https://sometesteapi.com/expense_ctr?func=updateExpense",e)}static \u0275fac=function(a){return new(a||p)};static \u0275prov=J({token:p,factory:p.\u0275fac,providedIn:"root"})};var y=class p{constructor(e,a){this.dialogRef=e;this.data=a}close(){this.dialogRef.close()}save(){this.dialogRef.close(this.data)}static \u0275fac=function(a){return new(a||p)(M(T),M(te))};static \u0275cmp=b({type:p,selectors:[["app-modal"]],decls:28,vars:3,consts:[[1,"modal_expenses"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"modal_expenses-form"],["appearance","fill"],["matInput","","name","description","required","",3,"ngModelChange","ngModel"],["matInput","","name","value","required","",3,"ngModelChange","ngModel"],["name","category",3,"ngModelChange","ngModel"],["value","Supermarket","calss","form form-control"],["value","Medicine","calss","form form-control"],["value","Transport","calss","form form-control"],["mat-dialog-actions","","align","end",1,"action_butons"],["mat-button","",1,"btn","btn-danger",3,"click"],["mat-button","","color","primary",1,"btn","btn-success",3,"click"]],template:function(a,t){a&1&&(n(0,"div",0)(1,"h2",1),o(2,"Update Expense"),i(),n(3,"div",2)(4,"form",3)(5,"mat-form-field",4)(6,"mat-label"),o(7,"Description"),i(),n(8,"input",5),u("ngModelChange",function(r){return c(t.data.description,r)||(t.data.description=r),r}),i()(),n(9,"mat-form-field",4)(10,"mat-label"),o(11,"Value"),i(),n(12,"input",6),u("ngModelChange",function(r){return c(t.data.value,r)||(t.data.value=r),r}),i()(),n(13,"mat-form-field",4)(14,"mat-label"),o(15,"Category"),i(),n(16,"mat-select",7),u("ngModelChange",function(r){return c(t.data.category,r)||(t.data.category=r),r}),n(17,"mat-option",8),o(18,"Supermarket"),i(),n(19,"mat-option",9),o(20,"Medicine"),i(),n(21,"mat-option",10),o(22,"Transport"),i()()()()(),n(23,"div",11)(24,"button",12),_("click",function(){return t.close()}),o(25,"Cancel"),i(),n(26,"button",13),_("click",function(){return t.save()}),o(27,"Save"),i()()()),a&2&&(m(8),d("ngModel",t.data.description),m(4),d("ngModel",t.data.value),m(4),d("ngModel",t.data.category))},dependencies:[N,I,D,V,F,S,C,v,ee,A,w,P,k,L,O,W],styles:[".modal_expenses[_ngcontent-%COMP%]{height:400px;width:300px;padding:40px;margin:auto}.action_butons[_ngcontent-%COMP%]{display:flex;justify-content:space-around}"]})};var de=(p,e)=>e.id;function ce(p,e){if(p&1){let a=B();n(0,"tr")(1,"td"),o(2),i(),n(3,"td"),o(4),i(),n(5,"td"),o(6),i(),n(7,"td",18)(8,"a",19),_("click",function(){let s=g(a).$implicit,r=q();return x(r.deleteFromList(s.id))}),o(9," Remove "),i(),n(10,"a",20),_("click",function(){let s=g(a).$implicit,r=q();return x(r.openUpdateDialog(s))}),o(11," Update "),i()()()}if(p&2){let a=e.$implicit;m(2),G(a.description),m(2),G(a.category),m(2),H("",a.value," USD")}}var ae=class p{constructor(e){this.dialog=e}manageExpensesService=h(j);expensesArray=[];totalExpense=0;expense_description;expense_value;expense_category="Medicine";selectedExpense=null;ngOnInit(){this.expensesArray=[{description:"medicine",value:15,id:0,category:"Health Care"},{description:"supermarket",value:150,id:1,category:"Food"},{description:"Uber",value:5,id:2,category:"Transpot"}],this.totalExpense=R(this.expensesArray),this.manageExpensesService.getExpenseFromApi().pipe(f(e=>{throw console.log(e),e})).subscribe(e=>{console.log(e)})}deleteFromList(e){let a=this.expensesArray.findIndex(t=>t.id==e);this.expensesArray.splice(a,1),this.totalExpense=R(this.expensesArray),this.manageExpensesService.deleteExpenseFromApi(e).pipe(f(t=>{throw console.log(t),t})).subscribe(t=>{console.log(t)})}addNewExpense(e){let a=e.controls.expense_description.value,t=e.controls.expense_category.value,s=e.controls.expense_value.value,r=this.expensesArray[this.expensesArray.length-1],l={description:a,value:s,category:t,id:r.id+1};this.expensesArray.push(l),this.manageExpensesService.addNewExpense(l).pipe(f(E=>{throw console.log(E),E})).subscribe(E=>{console.log(E)}),this.totalExpense=R(this.expensesArray)}openUpdateDialog(e){let a=this.dialog.open(y,{width:"300px",data:z({},e)});console.log(e),a.afterClosed().subscribe(t=>{if(t){let s=this.expensesArray.findIndex(r=>r.id===e.id);s!==-1&&(this.expensesArray[s]=t,this.totalExpense=R(this.expensesArray),this.manageExpensesService.updateExpense(t).pipe(f(r=>{throw console.log(r),r})).subscribe(r=>{console.log(r)}))}})}static \u0275fac=function(a){return new(a||p)(M(ne))};static \u0275cmp=b({type:p,selectors:[["app-manage-expenses-component"]],features:[Y([{provide:T,useValue:{}},y])],decls:51,vars:4,consts:[["expensesForm","ngForm"],[1,"main_expense_component"],[1,"panel","main_expense_component-add_new"],["mat-dialog-content",""],[1,"form","form_expense",2,"display","block",3,"ngSubmit"],["appearance","fill"],["matInput","","placeholder","Supermarket","type","text","id","expenseDescription","name","expense_description",3,"ngModelChange","ngModel"],["appearance","fill","for","expenseValue"],["matInput","","placeholder","150","type","number","id","expenseValue","name","expense_value",3,"ngModelChange","ngModel"],["appearance","fill","for","expenseCategory"],["id","expenseCategory","name","expense_category",3,"ngModelChange","ngModel"],["value","Supermarket"],["value","Medicine"],["value","Transport"],["type","submit",1,"btn","btn-primary",2,"margin","10px 0px"],[1,"panel","sumary_container-type","sumary_container-expenses"],[1,"table","table-striped","sumary_container-table","sumary_container-table__expenses"],[1,"sumary_container-table__head__expenses"],[1,"expese-action__buttons"],[1,"button","btn","btn-danger",3,"click"],[1,"button","btn","btn-primary",2,"margin-left","10px",3,"click"]],template:function(a,t){if(a&1){let s=B();n(0,"div",1)(1,"div",2)(2,"h2"),o(3,"Add New Expense"),i(),n(4,"div",3)(5,"form",4,0),_("ngSubmit",function(){g(s);let l=X(6);return x(t.addNewExpense(l))}),n(7,"mat-form-field")(8,"mat-label",5),o(9,"Description"),i(),n(10,"input",6),u("ngModelChange",function(l){return g(s),c(t.expense_description,l)||(t.expense_description=l),x(l)}),i()(),n(11,"mat-form-field")(12,"mat-label",7),o(13,"Value"),i(),n(14,"input",8),u("ngModelChange",function(l){return g(s),c(t.expense_value,l)||(t.expense_value=l),x(l)}),i()(),n(15,"mat-form-field")(16,"mat-label",9),o(17,"Category"),i(),n(18,"mat-select",10),u("ngModelChange",function(l){return g(s),c(t.expense_category,l)||(t.expense_category=l),x(l)}),n(19,"mat-option",11),o(20,"Supermarket"),i(),n(21,"mat-option",12),o(22,"Medicine"),i(),n(23,"mat-option",13),o(24,"Transport"),i()()(),n(25,"button",14),o(26,"Add new expense"),i()()()(),n(27,"div",15)(28,"h3"),o(29,"Expenses"),i(),n(30,"table",16)(31,"thead",17)(32,"tr")(33,"th"),o(34,"Description"),i(),n(35,"th"),o(36,"Category"),i(),n(37,"th"),o(38,"Value"),i(),n(39,"th"),o(40,"Action"),i()()(),n(41,"tbody"),K(42,ce,12,3,"tr",null,de),n(44,"tr")(45,"td"),o(46,"Total:"),i(),U(47,"td"),n(48,"td"),o(49),i(),U(50,"td"),i()()()()()}a&2&&(m(10),d("ngModel",t.expense_description),m(4),d("ngModel",t.expense_value),m(4),d("ngModel",t.expense_category),m(24),Q(t.expensesArray),m(7),H("",t.totalExpense," USD"))},dependencies:[V,F,S,$,C,v,A,w,N,I,D,P,k,L,O,W],styles:[".main_expense_component[_ngcontent-%COMP%]{padding:10px 20px}.main_expense_component-add_new[_ngcontent-%COMP%]{margin-bottom:1em}.sumary_container-table[_ngcontent-%COMP%]{text-transform:uppercase}.form[_ngcontent-%COMP%]{width:50%}.form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{display:block}h2[_ngcontent-%COMP%]{margin-top:20px}"]})};function R(p){let e=0;return p.forEach(a=>{e+=a.value*1}),e}export{ae as ManageExpensesComponent};
