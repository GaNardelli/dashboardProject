import './polyfills.server.mjs';
import{a as V,b as Z,c as $}from"./chunk-TDZ6HIQO.mjs";import{a as E,b as D,c as N,n as k,o as T,r as P}from"./chunk-BQ2KQDIV.mjs";import{$ as F,Q as C,T as v,U as S,V as w,W as x,X as A,Y as X,_ as Y,a as Q}from"./chunk-4LZ6IUTL.mjs";import{Bb as z,Fb as r,Gb as J,Ha as s,Hb as R,Ib as g,Jb as f,Kb as _,Ma as I,Mb as K,Sa as b,U,Z as y,da as p,ea as u,ib as q,jb as G,lb as i,mb as o,nb as H,ob as B,qb as d,rb as j,y as M}from"./chunk-ZX3AT7SY.mjs";import{a as L}from"./chunk-X2SEQXRR.mjs";var O=class l{http=y(Q);constructor(){}getIncomesFromApi(e){let t="https://sometesteapi.com/income_list";return e&&e>0&&(t+="?income_id="+e),this.http.get(t)}deleteIncomeFromApi(e){let t="https://sometesteapi.com/income_ctr?func=deleletedIncome&income_id="+e;return this.http.delete(t)}addNewIncome(e){return this.http.post("https://sometesteapi.com/income_ctr?func=addNewdIncome",e)}updateIncome(e){return this.http.post("https://sometesteapi.com/income_ctr?func=updatedIncome",e)}static \u0275fac=function(t){return new(t||l)};static \u0275prov=U({token:l,factory:l.\u0275fac,providedIn:"root"})};var h=class l{constructor(e,t){this.dialogRef=e;this.data=t}close(){this.dialogRef.close()}save(){this.dialogRef.close(this.data)}static \u0275fac=function(t){return new(t||l)(I(V),I(Z))};static \u0275cmp=b({type:l,selectors:[["app-modal-income"]],decls:18,vars:2,consts:[[1,"modal_expenses"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"modal_expenses-form"],["appearance","fill"],["matInput","","name","description","required","",3,"ngModelChange","ngModel"],["matInput","","name","value","required","",3,"ngModelChange","ngModel"],["mat-dialog-actions","","align","end",1,"action_butons"],["mat-button","",1,"btn","btn-danger",3,"click"],["mat-button","","color","primary",1,"btn","btn-success",3,"click"]],template:function(t,n){t&1&&(i(0,"div",0)(1,"h2",1),r(2,"Update Expense"),o(),i(3,"div",2)(4,"form",3)(5,"mat-form-field",4)(6,"mat-label"),r(7,"Description"),o(),i(8,"input",5),_("ngModelChange",function(a){return f(n.data.description,a)||(n.data.description=a),a}),o()(),i(9,"mat-form-field",4)(10,"mat-label"),r(11,"Value"),o(),i(12,"input",6),_("ngModelChange",function(a){return f(n.data.value,a)||(n.data.value=a),a}),o()()()(),i(13,"div",7)(14,"button",8),d("click",function(){return n.close()}),r(15,"Cancel"),o(),i(16,"button",9),d("click",function(){return n.save()}),r(17,"Save"),o()()()),t&2&&(s(8),g("ngModel",n.data.description),s(4),g("ngModel",n.data.value))},dependencies:[N,D,E,F,A,C,v,S,Y,x,w,T,k,P],styles:[".modal_expenses[_ngcontent-%COMP%]{height:350px;width:300px;padding:40px;margin:auto}.action_butons[_ngcontent-%COMP%]{display:flex;justify-content:space-around}"]})};var me=(l,e)=>e.id;function le(l,e){if(l&1){let t=B();i(0,"tr")(1,"td"),r(2),o(),i(3,"td"),r(4),o(),i(5,"td",13)(6,"a",14),d("click",function(){let m=p(t).$implicit,a=j();return u(a.deleteFromList(m.id))}),r(7," Remove "),o(),i(8,"a",15),d("click",function(){let m=p(t).$implicit,a=j();return u(a.openUpdateDialog(m))}),r(9," Update "),o()()()}if(l&2){let t=e.$implicit;s(2),J(t.description),s(2),R("",t.value," USD")}}var te=class l{constructor(e){this.dialog=e}manageIncomeService=y(O);incomesArray=[];totalBudget=0;income_description;income_value;income_category="Medicine";selectedIncome=null;ngOnInit(){this.incomesArray=[{description:"Salary",value:3e3,id:0},{description:"Bonus",value:400,id:1}],this.totalBudget=W(this.incomesArray),this.manageIncomeService.getIncomesFromApi().pipe(M(e=>{throw console.log(e),e})).subscribe(e=>{console.log(e),this.incomesArray=e})}addNewIncome(e){let t=e.controls.income_description.value,n=e.controls.income_value.value,m=this.incomesArray[this.incomesArray.length-1],a={description:t,value:n,id:m.id+1};this.incomesArray.push(a),this.manageIncomeService.addNewIncome(a).pipe(M(c=>{throw console.log(c),c})).subscribe(c=>{console.log(c)}),this.totalBudget=W(this.incomesArray)}openUpdateDialog(e){let t=this.dialog.open(h,{width:"300px",data:L({},e)});console.log(e),t.afterClosed().subscribe(n=>{if(n){let m=this.incomesArray.findIndex(a=>a.id===e.id);m!==-1&&(this.incomesArray[m]=n,this.totalBudget=W(this.incomesArray),this.manageIncomeService.updateIncome(n).pipe(M(a=>{throw console.log(a),a})).subscribe(a=>{console.log(a)}))}})}deleteFromList(e){let t=this.incomesArray.findIndex(n=>n.id==e);this.incomesArray.splice(t,1),this.manageIncomeService.deleteIncomeFromApi(e).pipe(M(n=>{throw console.log(n),n})).subscribe(n=>{console.log(n)}),this.totalBudget=W(this.incomesArray)}static \u0275fac=function(t){return new(t||l)(I($))};static \u0275cmp=b({type:l,selectors:[["app-manage-income-component"]],features:[K([{provide:V,useValue:{}},h])],decls:38,vars:3,consts:[["incomesForm","ngForm"],[1,"main_income_component"],[1,"panel","main_income_component-add_new"],["mat-dialog-content",""],[1,"form","form_income",2,"display","block",3,"ngSubmit"],["appearance","fill"],["matInput","","placeholder","Supermarket","type","text","id","incomeDescription","name","income_description",3,"ngModelChange","ngModel"],["appearance","fill","for","incomeValue"],["matInput","","placeholder","150","type","number","id","incomeValue","name","income_value",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary",2,"margin","10px 0px"],[1,"panel","sumary_container-type","sumary_container-incomes"],[1,"table","table-striped","sumary_container-table","sumary_container-table__incomes"],[1,"sumary_container-table__head__incomes"],[1,"expese-action__buttons"],[1,"button","btn","btn-danger",3,"click"],[1,"button","btn","btn-primary",2,"margin-left","10px",3,"click"]],template:function(t,n){if(t&1){let m=B();i(0,"div",1)(1,"div",2)(2,"h2"),r(3,"Add New Income"),o(),i(4,"div",3)(5,"form",4,0),d("ngSubmit",function(){p(m);let c=z(6);return u(n.addNewIncome(c))}),i(7,"mat-form-field")(8,"mat-label",5),r(9,"Description"),o(),i(10,"input",6),_("ngModelChange",function(c){return p(m),f(n.income_description,c)||(n.income_description=c),u(c)}),o()(),i(11,"mat-form-field")(12,"mat-label",7),r(13,"Value"),o(),i(14,"input",8),_("ngModelChange",function(c){return p(m),f(n.income_value,c)||(n.income_value=c),u(c)}),o()(),i(15,"button",9),r(16,"Add new income"),o()()()(),i(17,"div",10)(18,"h3"),r(19,"Incomes"),o(),i(20,"table",11)(21,"thead",12)(22,"tr")(23,"th"),r(24,"Description"),o(),i(25,"th"),r(26,"Value"),o(),i(27,"th"),r(28,"Action"),o()()(),i(29,"tbody"),q(30,le,10,2,"tr",null,me),i(32,"tr")(33,"td"),r(34,"Total:"),o(),i(35,"td"),r(36),o(),H(37,"td"),o()()()()()}t&2&&(s(10),g("ngModel",n.income_description),s(4),g("ngModel",n.income_value),s(16),G(n.incomesArray),s(6),R("",n.totalBudget," USD"))},dependencies:[F,A,C,X,v,S,x,w,N,D,E,T,k,P],styles:[".main_income_component[_ngcontent-%COMP%]{padding:10px 20px}.main_income_component-add_new[_ngcontent-%COMP%]{margin-bottom:2em}.sumary_container-table[_ngcontent-%COMP%]{text-transform:uppercase}.form[_ngcontent-%COMP%]{width:50%}.form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{display:block}h2[_ngcontent-%COMP%]{margin-top:20px}"]})};function W(l){let e=0;return l.forEach(t=>{e+=t.value*1}),e}export{te as ManageIncomeComponent};
